{"version":3,"sources":["webpack:///./resources/js/src/views/pages/Settings/Artists/ArtistEdit.vue?6618","webpack:///./resources/js/src/views/pages/Settings/Artists/ArtistEdit.vue?2986","webpack:///resources/js/src/views/pages/Settings/Artists/ArtistEdit.vue","webpack:///./resources/js/src/views/pages/Settings/Artists/ArtistEdit.vue"],"names":["name","avatar","artistData","isSending","imgURL","rotation","mounted","this","$vs","loading","type","text","$http","methods","handleSave","e","preventDefault","$validator","validateAll","then","result","component","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","value","expression","attrs","model","callback","$$v","_v","errors","has","_s","first","staticStyle","ref","_e","on"],"mappings":"+GAAA,ICAkO,ECoDlO,CACE,KADF,WAEI,MAAO,CACLA,KAAM,GACNC,OAAQ,GACRC,WAAY,KACZC,WAAW,EACXC,OAAQ,GACRC,SAAU,IAIdC,QAZF,WAYA,WACIC,KAAKC,IAAIC,QAAQ,CACfC,KAAM,UACNC,KAAM,8BAGRJ,KAAKK,MACT,IADA,gCACA,0BACM,QAAN,CACQ,cAAR,iDAGA,kBACA,4BACQ,EAAR,kCAEM,EAAN,oBAEM,EAAN,kBACM,EAAN,0BAEA,mBACM,QAAN,aAGEC,QAAS,CACPC,WADJ,SACA,cACMC,EAAEC,iBACFT,KAAKU,WAAWC,cAAcC,MAAK,SAAzC,GACQ,GAAIC,EAAQ,CACV,EAAV,aACU,IACV,EADA,uBACA,0BACU,EAAV,MACA,KADA,gCAEA,qBAFA,SAGA,CACY,KAAZ,OACY,OAAZ,GAEA,CACY,QAAZ,CACc,cAAd,iDAIA,kBACY,EAAZ,aACY,EAAZ,iDAEA,mBACY,KAAZ,aACY,KAAZ,YACc,MAAd,SACc,MAAd,GACc,KAAd,6C,OChHIC,EAAY,YACd,GHRW,WAAa,IAAIC,EAAIf,KAASgB,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,WAAW,CAACG,WAAW,CAAC,CAAC5B,KAAK,WAAW6B,QAAQ,aAAaC,MAAM,WAAaC,WAAW,eAAeJ,YAAY,cAAcK,MAAM,CAAC,MAAQ,MAAM,KAAO,QAAQC,MAAM,CAACH,MAAOR,EAAQ,KAAEY,SAAS,SAAUC,GAAMb,EAAItB,KAAKmC,GAAKJ,WAAW,UAAUT,EAAIc,GAAG,KAAKX,EAAG,OAAO,CAACG,WAAW,CAAC,CAAC5B,KAAK,OAAO6B,QAAQ,SAASC,MAAOR,EAAIe,OAAOC,IAAI,QAASP,WAAW,uBAAuBJ,YAAY,uBAAuB,CAACL,EAAIc,GAAGd,EAAIiB,GAAGjB,EAAIe,OAAOG,MAAM,YAAYlB,EAAIc,GAAG,KAAKX,EAAG,MAAM,CAACA,EAAG,MAAM,CAACgB,YAAY,CAAC,YAAY,SAAS,CAAChB,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,iBAAiB,CAACE,YAAY,sDAAsDM,MAAM,CAACH,MAAOR,EAAU,OAAEY,SAAS,SAAUC,GAAMb,EAAIlB,OAAO+B,GAAKJ,WAAW,WAAW,CAACT,EAAIc,GAAG,oCAAoCd,EAAIc,GAAG,KAAKX,EAAG,MAAM,CAACE,YAAY,OAAOc,YAAY,CAAC,YAAY,SAAS,CAAChB,EAAG,gBAAgB,CAACiB,IAAI,UAAUf,YAAY,eAAeK,MAAM,CAAC,IAAMV,EAAIlB,OAAO,QAAU,aAAa,OAASkB,EAAIjB,YAAYiB,EAAIc,GAAG,KAAKX,EAAG,kBAAkB,CAACE,YAAY,8BAA8BK,MAAM,CAAC,KAAO,iBAAiB,GAAGV,EAAIc,GAAG,KAAMd,EAAU,OAAEG,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,kBAAkB,CAACO,MAAM,CAAC,IAAM,IAAI,IAAM,MAAM,KAAO,KAAK,MAAQ,YAAYC,MAAM,CAACH,MAAOR,EAAY,SAAEY,SAAS,SAAUC,GAAMb,EAAIjB,SAAS8B,GAAKJ,WAAW,eAAe,GAAGT,EAAIqB,MAAM,OAAOrB,EAAIc,GAAG,KAAKX,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,gDAAgD,CAACF,EAAG,YAAY,CAACE,YAAY,eAAeK,MAAM,CAAC,SAAWV,EAAInB,WAAWyC,GAAG,CAAC,MAAQtB,EAAIR,aAAa,CAACQ,EAAIc,GAAG,4BAA4B,QAAQ,KAC3uD,IGUpB,EACA,KACA,KACA,MAIa,UAAAf,E","file":"js/chunks/22.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"my-4\"},[_c('vs-input',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],staticClass:\"w-full my-4\",attrs:{\"label\":\"Nom\",\"name\":\"name\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.errors.has('name')),expression:\"errors.has('name')\"}],staticClass:\"text-danger text-sm\"},[_vm._v(_vm._s(_vm.errors.first(\"name\")))]),_vm._v(\" \"),_c('div',[_c('div',{staticStyle:{\"max-width\":\"100%\"}},[_c('div',{staticClass:\"my-4\"},[_c('clipper-upload',{staticClass:\"inline-block p-2 my-2 bg-primary rounded text-white\",model:{value:(_vm.imgURL),callback:function ($$v) {_vm.imgURL=$$v},expression:\"imgURL\"}},[_vm._v(\"Importer La photo de l'éditeur\")]),_vm._v(\" \"),_c('div',{staticClass:\"flex\",staticStyle:{\"max-width\":\"100%\"}},[_c('clipper-basic',{ref:\"clipper\",staticClass:\" flex-grow-3\",attrs:{\"src\":_vm.imgURL,\"preview\":\"my-preview\",\"rotate\":_vm.rotation}}),_vm._v(\" \"),_c('clipper-preview',{staticClass:\"flex-grow-2 ml-2 my-clipper\",attrs:{\"name\":\"my-preview\"}})],1),_vm._v(\" \"),(_vm.imgURL)?_c('div',{staticClass:\"centerx\"},[_c('vs-input-number',{attrs:{\"min\":\"0\",\"max\":\"360\",\"step\":\"90\",\"label\":\"Rotation\"},model:{value:(_vm.rotation),callback:function ($$v) {_vm.rotation=$$v},expression:\"rotation\"}})],1):_vm._e()],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"vx-row\"},[_c('div',{staticClass:\"vx-col w-full\"},[_c('div',{staticClass:\"mt-8 flex flex-wrap items-center justify-end\"},[_c('vs-button',{staticClass:\"ml-auto mt-2\",attrs:{\"disabled\":_vm.isSending},on:{\"click\":_vm.handleSave}},[_vm._v(\"Sauvegarder l'artiste\")])],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArtistEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArtistEdit.vue?vue&type=script&lang=js&\"","<template>\r\n  <div class=\"my-4\">\r\n    <vs-input\r\n      class=\"w-full my-4\"\r\n      label=\"Nom\"\r\n      name=\"name\"\r\n      v-model=\"name\"\r\n      v-validate=\"'required'\"\r\n    />\r\n    <span class=\"text-danger text-sm\" v-show=\"errors.has('name')\">{{\r\n      errors.first(\"name\")\r\n    }}</span>\r\n    <div>\r\n      <div style=\"max-width: 100%;\">\r\n      <div class=\"my-4\">\r\n      <clipper-upload class=\"inline-block p-2 my-2 bg-primary rounded text-white\" v-model=\"imgURL\">Importer La photo de l'éditeur</clipper-upload>\r\n      <div class=\"flex\" style=\"max-width: 100%;\">\r\n      <clipper-basic \r\n      class=\" flex-grow-3\"\r\n      ref=\"clipper\" \r\n      :src=\"imgURL\" \r\n      preview=\"my-preview\"\r\n      :rotate=\"rotation\">\r\n      </clipper-basic>\r\n      <clipper-preview name=\"my-preview\" class=\"flex-grow-2 ml-2 my-clipper\" >\r\n      </clipper-preview>\r\n\r\n    </div>\r\n    <div class=\"centerx\" v-if=\"imgURL\">\r\n       <vs-input-number min=\"0\" max=\"360\" step=\"90\" v-model=\"rotation\" label=\"Rotation\"/>\r\n      </div>\r\n    </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"vx-row\">\r\n      <div class=\"vx-col w-full\">\r\n        <div class=\"mt-8 flex flex-wrap items-center justify-end\">\r\n          <vs-button\r\n            class=\"ml-auto mt-2\"\r\n            @click=\"handleSave\"\r\n            :disabled=\"isSending\"\r\n            >Sauvegarder l'artiste</vs-button\r\n          >\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Cropper from \"cropperjs\";\r\nimport debounce from \"lodash/debounce\";\r\n\r\nexport default {\r\n   data() {\r\n    return {\r\n      name: \"\",\r\n      avatar: \"\",\r\n      artistData: null,\r\n      isSending: false,\r\n      imgURL: \"\",\r\n      rotation: 0\r\n\r\n    };\r\n  },\r\n  mounted() {\r\n    this.$vs.loading({\r\n      type: \"corners\",\r\n      text: \"Patientez s'il vous plait\",\r\n    });\r\n\r\n    this.$http\r\n      .get(`/api/settings/artists/${this.$route.params.slug}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\r\n        },\r\n      })\r\n      .then((response) => {\r\n        if (response.data == \"Artist not found\") {\r\n          this.$router.push(\"/settings/artists\");\r\n        }\r\n        this.$vs.loading.close();\r\n\r\n        this.artistData = response.data;\r\n        this.name = this.artistData.name;\r\n      })\r\n      .catch(function(error) {\r\n        console.error(error);\r\n      });\r\n  },\r\n  methods: {\r\n    handleSave(e) {\r\n      e.preventDefault();\r\n      this.$validator.validateAll().then((result) => {\r\n        if (result) {\r\n            this.isSending = true;\r\n            const canvas = this.$refs.clipper.clip();\r\n            const ResultAvatar = canvas.toDataURL(\"image/jpeg\", 1);\r\n            this.$http\r\n              .post(\r\n                `/api/settings/artists/${this.$route.params.slug}/edit`,\r\n                {\r\n                  name: this.name,\r\n                  avatar: ResultAvatar,\r\n                },\r\n                {\r\n                  headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\r\n                  },\r\n                }\r\n              )\r\n              .then((response) => {\r\n                this.isSending = false;\r\n                this.$router.push(`/artists/${response.data.slug}`);\r\n              })\r\n              .catch(function(error) {\r\n                this.isSending = false;\r\n                this.$vs.dialog({\r\n                  color: \"danger\",\r\n                  title: ``,\r\n                  text: \"Erreur lors de la modification\",\r\n                });\r\n              });\r\n        }\r\n      });\r\n    },\r\n}\r\n}\r\n</script>","import { render, staticRenderFns } from \"./ArtistEdit.vue?vue&type=template&id=127d3971&\"\nimport script from \"./ArtistEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./ArtistEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}