(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{423:function(a,t,e){"use strict";e.r(t);var s=e(21),l=e.n(s),i=e(17),r=e.n(i),o={data:function(){return{data_local:JSON.parse(l()(this.data)),avatar:JSON.parse(l()(this.data.Avatar)),authentificatedUser:this.$store.state.AppActiveUser.user,avatarIsSending:!1,ChangeIsSending:!1,imgURL:"",rotation:0,activePrompt:!1,statusOptions:[{label:"Activé",value:"1"},{label:"Suspendu",value:"2"}],roleOptions:[{label:"Administrateur",value:"Admin"},{label:"Editeur",value:"Editor"}]}},components:{vSelect:r.a},props:{data:{type:Object,required:!0}},methods:{handleAvatarUpload:function(a){var t=this;this.avatarIsSending=!0;var e=this.$refs.clipper.clip().toDataURL("image/jpeg",1);this.$http.post("/api/users/".concat(this.data.slug,"/uploadAvatar"),{avatar:e},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(a){t.authentificatedUser.slug==a.data.user.slug&&(localStorage.setItem("user",l()(a.data.user)),t.$store.state.AppActiveUser.user=a.data.user),t.avatar=a.data.user.Avatar,t.objectUrl=null,t.previewCropped=null,t.cropper=null,t.selectedFile=null,t.$vs.dialog({color:"primary",title:"",text:"La photo a été mise à jour!"}),t.avatarIsSending=!1})).catch((function(a){this.avatarIsSending=!1,this.$vs.dialog({color:"primary",title:"",text:"La photo n'a pas été mise à jour!"})}))},handleAccountSubmit:function(a){var t=this;a.preventDefault(),this.$validator.validateAll().then((function(a){a&&(t.ChangeIsSending=!0,t.$http.post("/api/users/".concat(t.data.slug,"/edit"),{username:t.data_local.username,full_name:t.data_local.Full_Name,email:t.data_local.email,status:t.data_local.StatusName,role:t.data_local.role},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(a){t.ChangeIsSending=!1,t.$vs.dialog({color:"primary",title:"",text:"Modification complétée"})})).catch((function(a){t.ChangeIsSending=!1,t.$vs.dialog({color:"danger",title:"",text:"Modification Non complétée"})})))}))}}},n=e(3),c=Object(n.a)(o,(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{attrs:{id:"user-edit-tab-info"}},[e("div",{staticClass:"flex items-center justify-between ",attrs:{slot:"header"},slot:"header"},[e("vs-avatar",{attrs:{size:"150px",src:a.avatar}}),a._v(" "),e("vs-button",{on:{click:function(t){a.activePrompt=!0}}},[a._v("Changer la photo de profile")])],1),a._v(" "),e("vs-prompt",{attrs:{title:"Changer La photo",active:a.activePrompt},on:{cancel:function(t){a.val=""},accept:a.handleAvatarUpload,close:a.close,"update:active":function(t){a.activePrompt=t}}},[e("div",{staticClass:"con-exemple-prompt"},[e("div",{staticClass:"my-4"},[e("clipper-upload",{staticClass:"inline-block p-2 my-2 bg-primary rounded text-white",model:{value:a.imgURL,callback:function(t){a.imgURL=t},expression:"imgURL"}},[a._v("Importer La photo de l'éditeur")]),a._v(" "),e("div",{staticClass:"flex",staticStyle:{"max-width":"100%"}},[e("clipper-basic",{ref:"clipper",staticClass:" flex-grow-3",attrs:{src:a.imgURL,preview:"my-preview",rotate:a.rotation}}),a._v(" "),e("clipper-preview",{staticClass:"flex-grow-2 ml-2 my-clipper",attrs:{name:"my-preview"}})],1),a._v(" "),a.imgURL?e("div",{staticClass:"centerx"},[e("vs-input-number",{attrs:{min:"0",max:"360",step:"90",label:"Rotation"},model:{value:a.rotation,callback:function(t){a.rotation=t},expression:"rotation"}})],1):a._e()],1)])]),a._v(" "),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col md:w-1/2 w-full"},[e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"alpha_num|required",expression:"'alpha_num|required'"}],staticClass:"w-full mt-4",attrs:{label:"Username",name:"username"},model:{value:a.data_local.username,callback:function(t){a.$set(a.data_local,"username",t)},expression:"data_local.username"}}),a._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("username"),expression:"errors.has('username')"}],staticClass:"text-danger text-sm"},[a._v(a._s(a.errors.first("username")))]),a._v(" "),e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"alpha_spaces|required",expression:"'alpha_spaces|required'"}],staticClass:"w-full mt-4",attrs:{label:"Name",name:"name"},model:{value:a.data_local.Full_Name,callback:function(t){a.$set(a.data_local,"Full_Name",t)},expression:"data_local.Full_Name"}}),a._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[a._v(a._s(a.errors.first("name")))]),a._v(" "),e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"email|required",expression:"'email|required'"}],staticClass:"w-full mt-4",attrs:{label:"Email",type:"email",name:"email"},model:{value:a.data_local.email,callback:function(t){a.$set(a.data_local,"email",t)},expression:"data_local.email"}}),a._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("email"),expression:"errors.has('email')"}],staticClass:"text-danger text-sm"},[a._v(a._s(a.errors.first("email")))])],1),a._v(" "),e("div",{staticClass:"vx-col md:w-1/2 w-full"},[e("div",{staticClass:"mt-4"},[e("label",{staticClass:"vs-input--label"},[a._v("Status")]),a._v(" "),e("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{clearable:!1,options:a.statusOptions,name:"status",dir:a.$vs.rtl?"rtl":"ltr"},model:{value:a.data_local.StatusName,callback:function(t){a.$set(a.data_local,"StatusName",t)},expression:"data_local.StatusName"}}),a._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("status"),expression:"errors.has('status')"}],staticClass:"text-danger text-sm"},[a._v(a._s(a.errors.first("status")))])],1),a._v(" "),e("div",{staticClass:"mt-4"},[e("label",{staticClass:"vs-input--label"},[a._v("Role")]),a._v(" "),e("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{clearable:!1,options:a.roleOptions,name:"role",dir:a.$vs.rtl?"rtl":"ltr"},model:{value:a.data_local.role,callback:function(t){a.$set(a.data_local,"role",t)},expression:"data_local.role"}}),a._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("role"),expression:"errors.has('role')"}],staticClass:"text-danger text-sm"},[a._v(a._s(a.errors.first("role")))])],1)])]),a._v(" "),e("vx-card",{staticClass:"mt-base",attrs:{"no-shadow":"","card-border":""}}),a._v(" "),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col w-full"},[e("div",{staticClass:"mt-8 flex flex-wrap items-center justify-end"},[e("vs-button",{staticClass:"ml-auto mt-2",attrs:{disabled:a.ChangeIsSending},on:{click:a.handleAccountSubmit}},[a._v("Save Changes")])],1)])])],1)}),[],!1,null,null,null).exports,d=e(51),u=e.n(d),v=(e(168),{components:{vSelect:r.a,flatPickr:u.a},props:{data:{type:Object,required:!0}},data:function(){return{data_local:JSON.parse(l()(this.data)),authentificatedUser:this.$store.state.AppActiveUser.user,isSending:!1}},methods:{handleAccountSubmit:function(a){var t=this;a.preventDefault(),this.$validator.validateAll().then((function(a){a&&(t.ChangeIsSending=!0,t.$http.post("/api/users/".concat(t.data.slug,"/edit"),{mobile:t.data_local.Details.mobile,country:t.data_local.Details.country,adresse:t.data_local.Details.adresse,gender:t.data_local.Details.gender},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(a){t.isSending=!1,t.$vs.dialog({color:"primary",title:"",text:"Modification complétée"})})).catch((function(a){t.isSending=!1,t.$vs.dialog({color:"danger",title:"",text:"Modification Non complétée"})})))}))}}}),m=Object(n.a)(v,(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{attrs:{id:"user-edit-tab-info"}},[e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col w-full md:w-1/2"},[e("div",{staticClass:"flex items-end"},[e("feather-icon",{staticClass:"mr-2",attrs:{icon:"UserIcon",svgClasses:"w-5 h-5"}}),a._v(" "),e("span",{staticClass:"leading-none font-medium"},[a._v("Personal Information")])],1),a._v(" "),e("div",[e("vs-input",{staticClass:"w-full mt-4",attrs:{label:"Mobile",name:"mobile"},model:{value:a.data_local.Details.mobile,callback:function(t){a.$set(a.data_local.Details,"mobile",t)},expression:"data_local.Details.mobile"}}),a._v(" "),e("vs-input",{staticClass:"w-full mt-4",attrs:{label:"Country",name:"country","data-vv-as":"field"},model:{value:a.data_local.Details.country,callback:function(t){a.$set(a.data_local.Details,"country",t)},expression:"data_local.Details.country"}}),a._v(" "),e("vs-input",{staticClass:"w-full mt-4",attrs:{label:"Adresse",name:"adresse","data-vv-as":"field"},model:{value:a.data_local.Details.adresse,callback:function(t){a.$set(a.data_local.Details,"adresse",t)},expression:"data_local.Details.adresse"}}),a._v("\n        =\n        "),e("div",{staticClass:"mt-4"},[e("label",{staticClass:"text-sm"},[a._v("Gender")]),a._v(" "),e("div",{staticClass:"mt-2"},[e("vs-radio",{staticClass:"mr-4",attrs:{"vs-value":"Male"},model:{value:a.data_local.Details.gender,callback:function(t){a.$set(a.data_local.Details,"gender",t)},expression:"data_local.Details.gender"}},[a._v("Male")]),a._v(" "),e("vs-radio",{staticClass:"mr-4",attrs:{"vs-value":"Female"},model:{value:a.data_local.Details.gender,callback:function(t){a.$set(a.data_local.Details,"gender",t)},expression:"data_local.Details.gender"}},[a._v("Female")])],1)])],1)])]),a._v(" "),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col w-full"},[e("div",{staticClass:"mt-8 flex flex-wrap items-center justify-end"},[e("vs-button",{staticClass:"ml-auto mt-2",attrs:{disabled:a.ChangeIsSending},on:{click:a.handleAccountSubmit}},[a._v("Save Changes")])],1)])])])}),[],!1,null,null,null).exports,p={props:{data:{type:Object,required:!0}},data:function(){return{data_local:JSON.parse(l()(this.data))}},computed:{validateForm:function(){return!this.errors.any()}},methods:{save_changes:function(){var a=this;this.validateForm&&(this.IsSending=!0,this.$http.post("/api/users/".concat(this.data.slug,"/edit"),{mobile:this.data_local.Details.mobile,country:this.data_local.Details.country,adresse:this.data_local.Details.adresse,gender:this.data_local.Details.gender},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(t){a.isSending=!1,a.$vs.dialog({color:"primary",title:"",text:"Modification complétée"})})).catch((function(t){a.isSending=!1,a.$vs.dialog({color:"danger",title:"",text:"Modification Non complétée"})})))}}},_={components:{EditorEditTabAccount:c,EditorEditTabInformation:m,EditorEditTabLinks:Object(n.a)(p,(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{attrs:{id:"user-edit-tab-info"}},[e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col w-full md:w-1/2"},[e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"url:require_protocol",expression:"'url:require_protocol'"}],staticClass:"w-full",attrs:{"icon-pack":"feather",icon:"icon-twitter",label:"Twitter","icon-no-border":"",name:"twitter"},model:{value:a.data_local.Details.twitter,callback:function(t){a.$set(a.data_local.Details,"twitter",t)},expression:"data_local.Details.twitter"}}),a._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("twitter"),expression:"errors.has('twitter')"}],staticClass:"text-danger text-sm"},[a._v(a._s(a.errors.first("twitter")))]),a._v(" "),e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"url:require_protocol",expression:"'url:require_protocol'"}],staticClass:"w-full mt-4",attrs:{"icon-pack":"feather",icon:"icon-facebook",label:"Facebook","icon-no-border":"",name:"facebook"},model:{value:a.data_local.Details.facebook,callback:function(t){a.$set(a.data_local.Details,"facebook",t)},expression:"data_local.Details.facebook"}}),a._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("facebook"),expression:"errors.has('facebook')"}],staticClass:"text-danger text-sm"},[a._v(a._s(a.errors.first("facebook")))]),a._v(" "),e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"url:require_protocol",expression:"'url:require_protocol'"}],staticClass:"w-full mt-4",attrs:{"icon-pack":"feather",icon:"icon-instagram",label:"Instagram","icon-no-border":"",name:"instagram"},model:{value:a.data_local.Details.instagram,callback:function(t){a.$set(a.data_local.Details,"instagram",t)},expression:"data_local.Details.instagram"}}),a._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:a.errors.has("instagram"),expression:"errors.has('instagram')"}],staticClass:"text-danger text-sm"},[a._v(a._s(a.errors.first("instagram")))])],1)]),a._v(" "),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col w-full"},[e("div",{staticClass:"mt-8 flex flex-wrap items-center justify-end"},[e("vs-button",{staticClass:"ml-auto mt-2",attrs:{disabled:!a.validateForm},on:{click:a.save_changes}},[a._v("Save Changes")])],1)])])])}),[],!1,null,null,null).exports},data:function(){return{user_data:null,user_not_found:!1,activeTab:1}},mounted:function(){this.fetch_user_data(this.$route.params.slug)},methods:{fetch_user_data:function(a){var t=this;this.$http.get("/api/users/".concat(a),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(a){t.user_data=a.data})).catch((function(a){this.user_not_found=!0}))}}},h=Object(n.a)(_,(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{attrs:{id:"page-user-edit"}},[e("vs-alert",{attrs:{color:"danger",title:"User Not Found",active:a.user_not_found},on:{"update:active":function(t){a.user_not_found=t}}},[e("span",[a._v("User record with id: "+a._s(a.$route.params.userId)+" not found. ")]),a._v(" "),e("span",[e("span",[a._v("Check ")]),e("router-link",{staticClass:"text-inherit underline",attrs:{to:{name:"page-user-list"}}},[a._v("All Users")])],1)]),a._v(" "),a.user_data?e("vx-card",[e("div",{staticClass:"tabs-container px-6 pt-6",attrs:{slot:"no-body"},slot:"no-body",model:{value:a.activeTab,callback:function(t){a.activeTab=t},expression:"activeTab"}},[e("vs-tabs",{staticClass:"tab-action-btn-fill-conatiner"},[e("vs-tab",{attrs:{label:"Account","icon-pack":"feather",icon:"icon-user"}},[e("div",{staticClass:"tab-text"},[e("editor-edit-tab-account",{staticClass:"mt-4",attrs:{data:a.user_data}})],1)]),a._v(" "),e("vs-tab",{attrs:{label:"Information","icon-pack":"feather",icon:"icon-info"}},[e("div",{staticClass:"tab-text"},[e("editor-edit-tab-information",{staticClass:"mt-4",attrs:{data:a.user_data}})],1)]),a._v(" "),e("vs-tab",{attrs:{label:"Réseaux Sociaux","icon-pack":"feather",icon:"icon-share-2"}},[e("div",{staticClass:"tab-text"},[e("editor-edit-tab-links",{staticClass:"mt-4",attrs:{data:a.user_data}})],1)])],1)],1)]):a._e()],1)}),[],!1,null,null,null);t.default=h.exports}}]);
//# sourceMappingURL=20.js.map