(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{379:function(t,e,s){"use strict";s.r(e);var a={data:function(){return{name:"",avatar:"",artistData:null,isSending:!1,objectUrl:null,previewCropped:null,cropper:null,selectedFile:null,debouncedUpdatePreview:debounce(this.updatePreview,257)}},mounted:function(){var t=this;this.$http.get("/api/settings/artists/".concat(this.$route.params.slug),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){"Artist not found"==e.data&&t.$router.push("/artists"),t.artistData=e.data,t.name=t.artistData.name})).catch((function(t){console.error(t)}))},methods:{resetCropper:function(){this.cropper.reset()},rotateLeft:function(){console.log(this.cropper),this.cropper.rotate(-90)},rotateRight:function(){this.cropper.rotate(90)},setupCropper:function(t){if(this.cropper&&this.cropper.destroy(),this.objectUrl&&window.URL.revokeObjectURL(this.objectUrl),!t)return this.cropper=null,this.objectUrl=null,void(this.previewCropped=null);this.objectUrl=window.URL.createObjectURL(t),this.$nextTick(this.setupCropperInstance)},setupCropperInstance:function(){this.cropper=new Cropper(this.$refs.source,{aspectRatio:1,crop:this.debouncedUpdatePreview})},updatePreview:function(t){var e=this.cropper.getCroppedCanvas();this.previewCropped=e.toDataURL("image/png"),this.avatar=this.previewCropped}}},i=s(3),r=Object(i.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-4"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full my-4",attrs:{label:"Nom",name:"name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("name")))]),t._v(" "),s("div",[s("div",{staticStyle:{"max-width":"100%"}},[s("v-card-text",[s("v-file-input",{staticClass:"my-4",attrs:{accept:"image/png, image/jpeg",placeholder:"Modifier l'image de l'artiste","show-size":1024},on:{change:t.setupCropper},model:{value:t.selectedFile,callback:function(e){t.selectedFile=e},expression:"selectedFile"}}),t._v(" "),t.objectUrl?s("div",{staticClass:"flex flex-wrap justify-around"},[s("div",{staticClass:" text-center"},[s("div",{staticClass:"inline-block"},[s("img",{ref:"source",staticClass:"block max-w-full",staticStyle:{"max-height":"299px"},attrs:{src:t.objectUrl}})]),t._v(" "),s("div",{staticClass:"d-flex justify-center"},[s("v-btn",{attrs:{icon:"icon",small:"small"},on:{click:t.resetCropper}},[s("v-icon",{attrs:{small:"small"}},[t._v("mdi-aspect-ratio")])],1),t._v(" "),s("div",{staticClass:"mx-2"}),t._v(" "),s("v-btn",{attrs:{icon:"icon",small:"small"},on:{click:t.rotateLeft}},[s("v-icon",{attrs:{small:"small"}},[t._v("mdi-rotate-left")])],1),t._v(" "),s("v-btn",{attrs:{icon:"icon",small:"small"},on:{click:t.rotateRight}},[s("v-icon",{attrs:{small:"small"}},[t._v("mdi-rotate-right")])],1)],1)]),t._v(" "),s("div",{staticClass:" text-center"},[s("div",{staticClass:"inline-block "},[s("img",{staticClass:"block max-w-full",staticStyle:{"max-height":"299px"},attrs:{src:t.previewCropped}})])])]):t._e()],1)],1)]),t._v(" "),s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col w-full"},[s("div",{staticClass:"mt-8 flex flex-wrap items-center justify-end"},[s("vs-button",{staticClass:"ml-auto mt-2",attrs:{disable:t.isSending}},[t._v("Sauvegarder l'artiste")])],1)])])],1)}),[],!1,null,null,null);e.default=r.exports}}]);