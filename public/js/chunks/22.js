(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{435:function(t,a,e){"use strict";e.r(a);e(72),e(166);var i={data:function(){return{name:"",avatar:"",artistData:null,isSending:!1,imgURL:"",rotation:0}},mounted:function(){var t=this;this.$vs.loading({type:"corners",text:"Patientez s'il vous plait"}),this.$http.get("/api/settings/artists/".concat(this.$route.params.slug),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(a){"Artist not found"==a.data&&t.$router.push("/settings/artists"),t.$vs.loading.close(),t.artistData=a.data,t.name=t.artistData.name})).catch((function(t){console.error(t)}))},methods:{handleSave:function(t){var a=this;t.preventDefault(),this.$validator.validateAll().then((function(t){if(t){a.isSending=!0;var e=a.$refs.clipper.clip().toDataURL("image/jpeg",1);a.$http.post("/api/settings/artists/".concat(a.$route.params.slug,"/edit"),{name:a.name,avatar:e},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(t){a.isSending=!1,a.$router.push("/artists/".concat(t.data.slug))})).catch((function(t){this.isSending=!1,this.$vs.dialog({color:"danger",title:"",text:"Erreur lors de la modification"})}))}}))}}},s=e(3),r=Object(s.a)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"my-4"},[e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full my-4",attrs:{label:"Nom",name:"name"},model:{value:t.name,callback:function(a){t.name=a},expression:"name"}}),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("name")))]),t._v(" "),e("div",[e("div",{staticStyle:{"max-width":"100%"}},[e("div",{staticClass:"my-4"},[e("clipper-upload",{staticClass:"inline-block p-2 my-2 bg-primary rounded text-white",model:{value:t.imgURL,callback:function(a){t.imgURL=a},expression:"imgURL"}},[t._v("Importer La photo de l'Ã©diteur")]),t._v(" "),e("div",{staticClass:"flex",staticStyle:{"max-width":"100%"}},[e("clipper-basic",{ref:"clipper",staticClass:" flex-grow-3",attrs:{src:t.imgURL,preview:"my-preview",rotate:t.rotation}}),t._v(" "),e("clipper-preview",{staticClass:"flex-grow-2 ml-2 my-clipper",attrs:{name:"my-preview"}})],1),t._v(" "),t.imgURL?e("div",{staticClass:"centerx"},[e("vs-input-number",{attrs:{min:"0",max:"360",step:"90",label:"Rotation"},model:{value:t.rotation,callback:function(a){t.rotation=a},expression:"rotation"}})],1):t._e()],1)])]),t._v(" "),e("div",{staticClass:"vx-row"},[e("div",{staticClass:"vx-col w-full"},[e("div",{staticClass:"mt-8 flex flex-wrap items-center justify-end"},[e("vs-button",{staticClass:"ml-auto mt-2",attrs:{disabled:t.isSending},on:{click:t.handleSave}},[t._v("Sauvegarder l'artiste")])],1)])])],1)}),[],!1,null,null,null);a.default=r.exports}}]);
//# sourceMappingURL=22.js.map